<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sc√©nario P√©dagogique : Proc√©dures & Logigrammes (TSMEL)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FAFAF9; /* Stone-50 */
            color: #1C1917; /* Stone-900 */
        }

        /* CHART CONTAINER STYLING - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; 
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Transition Classes */
        .card-transition {
            transition: all 0.4s ease-in-out;
        }
        
        .analog-mode {
            background-color: #FEF3C7 !important; /* Amber-100 for paper feel */
            border-left-color: #D97706 !important; /* Amber-600 */
        }
    </style>
    <!-- Chosen Palette: Warm Stone & Logistic Blue. Background: Stone-50. Primary: Stone-800. Accents: Blue-600 (Standard), Amber-500 (Alternative/Warning), Emerald-600 (Validation). -->
    <!-- Application Structure Plan: Dashboard-First approach adapted for TSMEL. 
         1. Header: Context (Trainer: Sylvain GORECKI, Topic: Procedures).
         2. Analytics Dashboard: Bloom & Methods visualization remains to ensure pedagogical balance.
         3. Control Center: "Power Outage" Toggle is CRITICAL here to switch between "Digital Process Design" and "Manual Stock Planning".
         4. Interactive Timeline: Steps for Co-construction -> Drafting -> Flowcharting.
         5. Evaluation Grid: Specific criteria for Procedures & Flowcharts (Symbology, Critical Points). -->
    <!-- Visualization & Content Choices: 
         1. Bloom Taxonomy -> Goal: Ensure analysis/creation level for TSMEL -> Viz: Doughnut Chart.
         2. Teaching Methods -> Goal: Highlight Active/Co-construction -> Viz: Bar Chart.
         3. Timeline Items -> Goal: Day Flow -> Viz: Cards -> Interaction: Content Swap (Procedure vs Stock Plan).
         4. Evaluation Criteria -> Goal: Checklist for Flowchart/Procedure -> Viz: Table.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-stone-50 min-h-screen">

    <!-- HEADER SECTION -->
    <header class="bg-white shadow-sm border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-stone-800">Sc√©nario P√©dagogique <span class="text-blue-600">TSMEL : Proc√©dures</span></h1>
                <p class="text-sm text-stone-500">Formateur : Sylvain GORECKI | Dur√©e : 7h | Mercredi</p>
            </div>
            <div class="hidden md:block text-right">
                <div class="text-xs font-semibold uppercase tracking-wider text-stone-400">Objectif Global (3C Tyler)</div>
                <div class="text-sm font-medium text-stone-700 max-w-md">Formaliser et sch√©matiser une proc√©dure de r√©ception complexe (Temp√©rature Dirig√©e) conforme aux normes qualit√©.</div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">

        <!-- INTRO & ANALYTICS SECTION -->
        <section>
            <div class="mb-6">
                <h2 class="text-xl font-bold text-stone-800 mb-2">üìä Tableau de Bord P√©dagogique</h2>
                <p class="text-stone-600 leading-relaxed max-w-4xl">
                    Vue d'ensemble de la journ√©e "Proc√©dures & Qualit√©". L'accent est mis sur la m√©thode <strong>Active (Co-construction)</strong> pour l'√©laboration des supports de cours et la cr√©ation des logigrammes.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Bloom Chart -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-lg font-semibold text-stone-700 mb-4 text-center">R√©partition Taxonomie de Bloom</h3>
                    <div class="chart-container">
                        <canvas id="bloomChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-stone-400 mt-2">Niveaux cognitifs : Focus sur Analyser & Cr√©er</p>
                </div>

                <!-- Methods Chart -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-lg font-semibold text-stone-700 mb-4 text-center">Mix M√©thodes P√©dagogiques</h3>
                    <div class="chart-container">
                        <canvas id="methodsChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-stone-400 mt-2">Pr√©dominance de l'Active & Interrogative</p>
                </div>
            </div>
        </section>

        <!-- TIMELINE & CONTROLS SECTION -->
        <section>
            <div class="flex flex-col md:flex-row justify-between items-end md:items-center mb-6 gap-4">
                <div>
                    <h2 class="text-xl font-bold text-stone-800 mb-2">‚è±Ô∏è D√©roul√© S√©quenc√©</h2>
                    <p class="text-stone-600 max-w-2xl">
                        Fil conducteur de la journ√©e.
                        <br><strong>Fonction critique :</strong> Activez le mode "Panne de Courant" pour basculer du sc√©nario "Proc√©dures Digitales" au sc√©nario "Implantation Stock & Cahier des Charges".
                    </p>
                </div>
                
                <!-- Power Outage Toggle -->
                <div class="flex items-center bg-stone-200 rounded-full p-1 cursor-pointer transition-colors duration-300" id="powerToggleWrapper" onclick="togglePowerMode()">
                    <div class="px-4 py-2 rounded-full text-sm font-bold text-stone-500 transition-all" id="modeDigital">üñ•Ô∏è Proc√©dures</div>
                    <div class="px-4 py-2 rounded-full text-sm font-bold text-stone-500 transition-all" id="modeAnalog">‚ö° Stock (Secours)</div>
                </div>
            </div>

            <!-- Filters -->
            <div class="flex flex-wrap gap-2 mb-8">
                <button onclick="filterTimeline('all')" class="px-3 py-1 text-sm rounded-md bg-stone-800 text-white hover:bg-stone-700 transition">Tout voir</button>
                <button onclick="filterTimeline('Active')" class="px-3 py-1 text-sm rounded-md bg-white border border-stone-300 text-stone-600 hover:bg-stone-50 transition">M√©thode Active</button>
                <button onclick="filterTimeline('Evaluations')" class="px-3 py-1 text-sm rounded-md bg-white border border-stone-300 text-stone-600 hover:bg-stone-50 transition">√âvaluations</button>
                <button onclick="filterTimeline('Pause')" class="px-3 py-1 text-sm rounded-md bg-white border border-stone-300 text-stone-600 hover:bg-stone-50 transition">Pauses</button>
            </div>

            <!-- Timeline Container -->
            <div id="timelineContainer" class="space-y-4">
                <!-- Javascript will inject content here -->
            </div>
        </section>

        <!-- EVALUATION CRITERIA SECTION -->
        <section class="bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden">
            <div class="p-6 bg-stone-50 border-b border-stone-200">
                <h2 class="text-xl font-bold text-stone-800">‚úÖ Grille d'√âvaluation (Crit√®res de R√©ussite)</h2>
                <p class="text-stone-600 mt-2">
                    Crit√®res pour l'exercice "Proc√©dure de R√©ception" (ou "Plan d'Implantation" en cas de panne).
                </p>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-stone-200">
                    <thead class="bg-stone-100">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">Comp√©tence Vis√©e</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">Indicateurs (Crit√®res)</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">Validation</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-stone-200">
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-900">Symbologie (Logigramme)</td>
                            <td class="px-6 py-4 text-sm text-stone-600">Respect des normes ISO (Losange=D√©cision, Rectangle=Action, Ovale=D√©but/Fin).</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-400">[ ] OUI / [ ] NON</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-900">Exhaustivit√© (Process)</td>
                            <td class="px-6 py-4 text-sm text-stone-600">Pr√©sence de toutes les √©tapes cl√©s : Contr√¥le Doc, Quantitatif, Qualitatif.</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-400">[ ] OUI / [ ] NON</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-900">Points Critiques (Temp√©rature)</td>
                            <td class="px-6 py-4 text-sm text-stone-600">Identification claire des seuils de temp√©rature et actions si non-conformit√© (Refus/R√©serve).</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-400">[ ] OUI / [ ] NON</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-900">Clart√© R√©dactionnelle</td>
                            <td class="px-6 py-4 text-sm text-stone-600">Utilisation du mode imp√©ratif, phrases courtes, vocabulaire technique pr√©cis.</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-400">[ ] OUI / [ ] NON</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-900">Format Alternatif (Plan)</td>
                            <td class="px-6 py-4 text-sm text-stone-600">Le plan d'implantation respecte les flux logiques (Marche en avant) et distingue les zones (Froid/Sec).</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-400">[ ] OUI / [ ] NON</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

    </main>

    <footer class="bg-stone-900 text-stone-400 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-sm">G√©n√©r√© pour l'Ing√©nierie de Formation TSMEL</p>
            <p class="text-xs mt-2">¬© 2026 Sylvain GORECKI - Document de travail interne</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA STORAGE ---
        // Mise √† jour des donn√©es pour le sc√©nario TSMEL : Proc√©dures & R√©ception vs Implantation Stock
        const sessionData = [
            { time: "08:30", type: "Intro", duration: 30, intent: "Casser les repr√©sentations sur les proc√©dures", bloom: "Comprendre", method: "Active / Interrogative", activity: "Icebreaker 'Le Toast' : Dessiner un processus simple sans se parler.", alt: "Icebreaker : Dessiner le plan de sa propre cuisine (Notion de flux).", tools: "Paperboard / Post-it", eval: "Diagnostique" },
            
            { time: "09:00", type: "Module", duration: 60, intent: "Distinguer Proc√©dure, Processus et Mode Op√©ratoire", bloom: "Conna√Ætre", method: "Expositive / Interrogative", activity: "Co-construction au tableau : D√©finitions et hi√©rarchie documentaire.", alt: "Cours magistral interactif : Les fondamentaux de l'implantation (All√©es, Zones).", tools: "Tableau Blanc / Vid√©oprojecteur", eval: "Formative non-Formelle" },
            
            { time: "10:00", type: "Pause", duration: 15, intent: "Pause", bloom: "N/A", method: "N/A", activity: "Pause Caf√© ‚òï", alt: "Pause (discussion informelle)", tools: "N/A", eval: "N/A" },
            
            { time: "10:15", type: "Module", duration: 75, intent: "Identifier les √©tapes cl√©s d'une r√©ception", bloom: "Analyser", method: "Active (Co-construction)", activity: "Brainstorming : Lister toutes les √©tapes d'une r√©ception (Camion √† Stock).", alt: "Brainstorming : Lister les contraintes d'un entrep√¥t (Piliers, Portes, T¬∞).", tools: "Post-its / Mur", eval: "Formative non-Formelle" },
            
            { time: "11:30", type: "Module", duration: 60, intent: "Ma√Ætriser la symbologie Logigramme", bloom: "Appliquer", method: "Expositive / Active", activity: "Exercice : Traduire un texte court en logigramme (Symboles ISO).", alt: "Exercice : Calcul de surface de stockage n√©cessaire (Sur papier).", tools: "Support Cours / Exercice", eval: "Formative non-Formelle" },
            
            { time: "12:30", type: "Pause", duration: 60, intent: "D√©jeuner", bloom: "N/A", method: "N/A", activity: "Repas üçΩÔ∏è", alt: "Repas", tools: "N/A", eval: "N/A" },
            
            { time: "13:30", type: "Module", duration: 90, intent: "Formaliser une proc√©dure complexe", bloom: "Cr√©er", method: "Active / Exp√©rimentale", activity: "Mise en situation : R√©diger la proc√©dure 'R√©ception T¬∞ Dirig√©e' + Logigramme.", alt: "Mise en situation : Dessiner le Plan d'Implantation complet (A3) + Zonage.", tools: "PC / Logiciel de diag / Word", eval: "Formative Formelle" },
            
            { time: "15:00", type: "Pause", duration: 10, intent: "Pause", bloom: "N/A", method: "N/A", activity: "Pause courte", alt: "Pause courte", tools: "N/A", eval: "N/A" },
            
            { time: "15:10", type: "Module", duration: 50, intent: "Tester et valider la proc√©dure", bloom: "Evaluer", method: "Active (Pair-√†-Pair)", activity: "Crash Test : Un autre groupe tente d'appliquer la proc√©dure (Simulation).", alt: "Revue de projet : Pr√©sentation du plan d'implantation et critique crois√©e.", tools: "Grille d'observation", eval: "Formative Formelle" },
            
            { time: "16:00", type: "Module", duration: 30, intent: "Ancrer les connaissances", bloom: "Evaluer", method: "Interrogative", activity: "Quiz final 'Les pi√®ges de la r√©daction' & Bilan.", alt: "R√©daction : √âcrire le Cahier des Charges technique du stock.", tools: "Microsoft Forms (ou Papier)", eval: "Sommative EPCF" }
        ];

        let powerOutageMode = false;

        // --- CHART INITIALIZATION ---
        
        function initCharts() {
            // Data Processing for Charts
            const bloomCounts = {};
            const methodCounts = {};

            sessionData.forEach(item => {
                if (item.type === 'Module' || item.type === 'Intro') {
                    // Bloom
                    bloomCounts[item.bloom] = (bloomCounts[item.bloom] || 0) + item.duration;
                    
                    // Methods (simplifying logic to main category)
                    let methodKey = item.method.split('/')[0].split('(')[0].trim();
                    if(methodKey.toLowerCase().includes('active')) methodKey = 'Active';
                    if(methodKey.toLowerCase().includes('expositive')) methodKey = 'Expositive';
                    if(methodKey.toLowerCase().includes('interrogative')) methodKey = 'Interrogative';
                    
                    methodCounts[methodKey] = (methodCounts[methodKey] || 0) + item.duration;
                }
            });

            // Bloom Chart (Doughnut)
            const ctxBloom = document.getElementById('bloomChart').getContext('2d');
            new Chart(ctxBloom, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(bloomCounts),
                    datasets: [{
                        data: Object.values(bloomCounts),
                        backgroundColor: ['#e7e5e4', '#d6d3d1', '#a8a29e', '#78716c', '#57534e', '#44403c'], // Stone shades
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' }
                    }
                }
            });

            // Method Chart (Bar)
            const ctxMethod = document.getElementById('methodsChart').getContext('2d');
            new Chart(ctxMethod, {
                type: 'bar',
                data: {
                    labels: Object.keys(methodCounts),
                    datasets: [{
                        label: 'Minutes',
                        data: Object.values(methodCounts),
                        backgroundColor: ['#2563EB', '#F59E0B', '#10B981'], // Blue, Amber, Emerald
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        // --- TIMELINE RENDERING LOGIC ---

        function renderTimeline(filter = 'all') {
            const container = document.getElementById('timelineContainer');
            container.innerHTML = '';

            sessionData.forEach((item, index) => {
                // Filter Logic
                if (filter !== 'all') {
                    if (filter === 'Pause' && item.type !== 'Pause') return;
                    if (filter === 'Active' && !item.method.toLowerCase().includes('active')) return;
                    if (filter === 'Evaluations' && item.eval === 'N/A') return;
                }

                // Card Styling based on type and Power Mode
                let borderColor = 'border-stone-200';
                let icon = 'üìå';
                
                if (item.type === 'Pause') {
                    borderColor = 'border-stone-100 bg-stone-50 opacity-70';
                    icon = '‚òï';
                } else if (item.eval.includes('Formelle') || item.eval.includes('Sommative')) {
                    borderColor = 'border-l-4 border-l-emerald-500 border-t border-r border-b border-stone-200';
                    icon = '‚úÖ';
                } else {
                    borderColor = 'border-l-4 border-l-blue-500 border-t border-r border-b border-stone-200';
                    icon = 'üìò';
                }

                // Content Selection (Normal vs Power Outage)
                const currentActivity = powerOutageMode ? item.alt : item.activity;
                const currentTools = powerOutageMode ? "Papier, Crayon, Tableau" : item.tools;
                const modeClass = powerOutageMode ? 'analog-mode' : '';
                
                // HTML Template
                const card = document.createElement('div');
                card.className = `card-transition bg-white rounded-lg p-5 border shadow-sm flex flex-col md:flex-row gap-4 ${borderColor} ${modeClass}`;
                
                // Add specific warning icon for Power Mode
                const displayIcon = powerOutageMode && (item.type === 'Module' || item.type === 'Intro') ? '‚ö°' : icon;

                card.innerHTML = `
                    <div class="md:w-32 flex-shrink-0 flex flex-row md:flex-col items-center md:items-start gap-2">
                        <span class="text-xl">${displayIcon}</span>
                        <div>
                            <span class="block font-bold text-lg text-stone-800">${item.time}</span>
                            <span class="text-xs text-stone-500">${item.duration} min</span>
                        </div>
                    </div>
                    
                    <div class="flex-grow">
                        <div class="flex justify-between items-start">
                            <h3 class="font-bold text-lg text-stone-800 mb-1">${currentActivity}</h3>
                            ${item.bloom !== 'N/A' ? `<span class="px-2 py-1 rounded bg-stone-100 text-xs font-semibold text-stone-600">${item.bloom}</span>` : ''}
                        </div>
                        
                        <p class="text-sm text-stone-600 mb-3 italic">"${item.intent}"</p>
                        
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-xs text-stone-500">
                            ${item.method !== 'N/A' ? `
                                <div class="flex items-center gap-1">
                                    <span class="font-semibold">M√©thode:</span> ${item.method}
                                </div>` : ''}
                            ${item.tools !== 'N/A' ? `
                                <div class="flex items-center gap-1">
                                    <span class="font-semibold">Outils:</span> ${currentTools}
                                </div>` : ''}
                            ${item.eval !== 'N/A' ? `
                                <div class="flex items-center gap-1">
                                    <span class="font-semibold">√âval:</span> ${item.eval}
                                </div>` : ''}
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- INTERACTION HANDLERS ---

        function togglePowerMode() {
            powerOutageMode = !powerOutageMode;
            
            // Toggle UI Switch Visuals
            const wrapper = document.getElementById('powerToggleWrapper');
            const digitalBtn = document.getElementById('modeDigital');
            const analogBtn = document.getElementById('modeAnalog');

            if (powerOutageMode) {
                wrapper.classList.remove('bg-stone-200');
                wrapper.classList.add('bg-amber-200');
                digitalBtn.classList.replace('text-stone-500', 'text-stone-400');
                analogBtn.classList.replace('text-stone-500', 'text-amber-800');
                analogBtn.classList.add('bg-white', 'shadow-sm');
                digitalBtn.classList.remove('bg-white', 'shadow-sm');
            } else {
                wrapper.classList.add('bg-stone-200');
                wrapper.classList.remove('bg-amber-200');
                analogBtn.classList.replace('text-amber-800', 'text-stone-500');
                digitalBtn.classList.replace('text-stone-400', 'text-stone-500');
                digitalBtn.classList.add('bg-white', 'shadow-sm');
                analogBtn.classList.remove('bg-white', 'shadow-sm');
            }

            // Re-render Timeline
            renderTimeline();
        }

        function filterTimeline(criteria) {
            renderTimeline(criteria);
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            renderTimeline();
            
            // Highlight default digital mode
            document.getElementById('modeDigital').classList.add('bg-white', 'shadow-sm');
        });

    </script>
</body>
</html>
